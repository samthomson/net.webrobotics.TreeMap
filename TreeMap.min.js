var net=net||{};net.webrobotics=net.webrobotics||{};net.webrobotics.MapElement=function(a){this.key=a;this.next;this.prev;this.values=new Array;this.last=0};net.webrobotics.MapElement.prototype.getKey=function(){return this.key};net.webrobotics.MapElement.prototype.addValue=function(a){this.values[this.last]=a;this.last++};net.webrobotics.MapElement.prototype.setNext=function(a){this.next=a};net.webrobotics.MapElement.prototype.setPrev=function(a){this.prev=a};net.webrobotics.MapElement.prototype.getNext=function(){return this.next};net.webrobotics.MapElement.prototype.getPrev=function(){return this.prev};net.webrobotics.MapElement.prototype.getValues=function(){return this.values};net.webrobotics.MapElement.prototype.getLastValue=function(){return this.values[this.values.length-1]};var comparator=function(a,b){if(a<b)return-1;else return a>b?1:0};net.webrobotics.TreeMap=function(a,b){this.options=b;this.allowDuplicateKeys=b?b.allowDuplicateKeys:true|true;this.suppressDuplicateKeyAlerts=b?b.suppressDuplicateKeyAlerts:false|false;this.elements=new Array;this.comparator=a};net.webrobotics.TreeMap.prototype.containsKey=function(a){if(this.get(a)!=null)return true;return false};net.webrobotics.TreeMap.prototype.containsValue=function(a){var b=this.toAny(function(b){return a==b?true:null});return b!=null?true:false};net.webrobotics.TreeMap.prototype.toAny=function(a){var b;var c=this.toArray();for(var d=0;d<c.length;d++){b=a(c[d]);if(b!=null)return b}};net.webrobotics.TreeMap.prototype.forEach=function(a){var b=this.toArray();for(var c=0;c<b.length;c++)a(b[c])};net.webrobotics.TreeMap.prototype.getFilteredSubTreeMapByValue=function(a){var b=new net.webrobotics.TreeMap(this.comparator,this.options);var c,d,e,f;for(d=0;d<this.elements.length;d++){c=this.elements[d];for(e=0;e<c.getValues().length;e++){f=c.getValues()[e];if(a(f)==true){b.put(c.getKey(),f)}}}return b};net.webrobotics.TreeMap.prototype.getFilteredSubTreeMapByKey=function(a){var b=new net.webrobotics.TreeMap(this.comparator,this.options);var c,d;for(d=0;d<this.elements.length;d++){c=this.elements[d];if(a(c.getKey())==true){b.elements.push(c)}}return b};net.webrobotics.TreeMap.prototype.getSubTreeMap=function(a,b){var c;var d=this.positionOf(a);var e=this.positionOf(b);if(!this.elements[e]||this.comparator(this.elements[e].getKey(),b)!=0){e--}if(d<=e){c=new net.webrobotics.TreeMap(this.comparator,this.options);c.elements=this.elements.slice(d,e+1)}return c};net.webrobotics.TreeMap.prototype.size=function(a){if(a&&this.allowDuplicateKeys){var b=0;for(var c=0;c<this.elements.length;c++){b+=this.elements[c].getValues().length}return b}else return this.elements.length};net.webrobotics.TreeMap.prototype.last=function(){var a=this.elements[this.size()-1].getValues();if(this.allowDuplicateKeys)return a;else return a[0]};net.webrobotics.TreeMap.prototype.first=function(){var a=this.elements[0].getValues();return this.allowDuplicateKeys?a:a[0]};net.webrobotics.TreeMap.prototype.at=function(a){var b;if(this.elements[a]){b=this.elements[a].getValues();return this.allowDuplicateKeys?b:b[0]}return null};net.webrobotics.TreeMap.prototype.put=function(a,b){var c=new net.webrobotics.MapElement(a);c.addValue(b);if(this.size()==0){this.elements.push(c);return}var d,e;var f=this.comparator(this.elements[this.elements.length-1].getKey(),a);if(f<=0){d=f==0?this.elements.length-1:this.elements.length}else{d=this.comparator(this.elements[0].getKey(),a)>=0?0:this.positionOf(a)}e=this.elements[d];if(e!=null&&this.comparator(e.getKey(),a)==0){if(this.allowDuplicateKeys)e.addValue(b);if(!this.suppressDuplicateKeyAlerts)console.log("Duplicate key: "+a.toString())}else{var g=new Array;g=g.concat(this.elements.slice(0,d));g.push(c);g=g.concat(this.elements.slice(d));this.elements=g}};net.webrobotics.TreeMap.prototype.positionOf=function(a){this.positionOfTR=function(a,b,c,d){var e=d-c+1;var f=Math.floor(e/2)+c;var g=this.comparator(b[f].getKey(),a);if(g==0){return f}else{if(e==1){return g==-1?c+1:c}else{return g==-1?this.positionOfTR(a,b,f,d):this.positionOfTR(a,b,c,f-1)}}};return this.positionOfTR(a,this.elements,0,this.elements.length-1)};net.webrobotics.TreeMap.prototype.toArray=function(){var a=new Array;var b,c;for(c=0;c<this.elements.length;c++){b=this.elements[c];a=a.concat(b.getValues())}return a};net.webrobotics.TreeMap.prototype.toString=function(){var a="";var b,c,d;var e="";for(var c=0;c<this.elements.length;c++){b=this.elements[c];e="";for(d=0;d<b.getValues().length;d++){e+=b.getValues()[d]+","}a+="<"+b.getKey()+","+e+">; "}return a};net.webrobotics.TreeMap.prototype.delete=function(a){var b=this.positionOf(a);if(!this.elements[b]||this.comparator(this.elements[b].getKey(),a)!=0)return false;var c=new Array;if(b>0){c=c.concat(this.elements.slice(0,b))}if(b<this.elements.length-1){c=c.concat(this.elements.slice(b+1))}this.elements=c;return true};net.webrobotics.TreeMap.prototype.get=function(a){var b=this.positionOf(a);if(!this.elements[b]||this.comparator(this.elements[b].getKey(),a)!=0)return null;return this.at(b)};net.webrobotics.TreeMap.prototype.nearest=function(a,b){var c;var d=this.positionOf(a);var e=this.elements[d];if(b||e!=null&&this.comparator(e.getKey(),a)==0){if(e!=null){c=e.getValues();return this.allowDuplicateKeys?c:c[0]}return null}return this.at(d-1)}